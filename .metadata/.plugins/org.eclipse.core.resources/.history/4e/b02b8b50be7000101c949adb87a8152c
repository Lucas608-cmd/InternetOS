package cn.org.act.internetos.manage.app;

import org.dom4j.Element;

import cn.org.act.internetos.signal.ClientSignalListener;
import cn.org.act.internetos.signal.HttpSignalListener;
import cn.org.act.internetos.signal.MatchRule;
import cn.org.act.internetos.signal.SignalListener;

public class ListenerFactory {

	public static SignalListener createListener(Element listener) {
		String listenertype = listener.getName();
		if (listenertype == "HttpListener")
			return createHttpListener(listener);
		else if(listenertype == "ClientListener")
			return createClientListener(listener);
		else
			return null;
	}

	private static SignalListener createClientListener(Element listener) {
		// TODO Auto-generated method stub
		return null;
	}

	private static SignalListener createHttpListener(Element listenerElement) {
		String url = listenerElement.elementText("URL");
		MatchRule rule = MatchRuleFactory.createMatchRule(listenerElement
				.element("MatchRule"));
		return new HttpSignalListener(url,rule);
	}

}
